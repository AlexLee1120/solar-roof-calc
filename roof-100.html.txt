<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>100åªå±‹é ‚å¤ªé™½èƒ½æŠ•è³‡æ•ˆç›Šäº’å‹•åˆ†æ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background:#FDFBF6; color:#424242; }
    .card { background:#fff; border-radius:1rem; box-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1); }
    .card:hover { box-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -2px rgb(0 0 0 / 0.1); transform:translateY(-4px);}
    .stat-value { color:#7C9D96; font-weight:700; }
    .accent-bg { background:#7C9D96; }
    .accent-text { color:#7C9D96; }
    .secondary-accent-text { color:#A1887F; }
    input[type="range"]{ -webkit-appearance:none; width:100%; height:8px; background:#e0e0e0; border-radius:5px; outline:none; }
    input[type="range"]::-webkit-slider-thumb{ -webkit-appearance:none; width:24px; height:24px; background:#7C9D96; cursor:pointer; border-radius:50%;}
    input[type="range"]::-moz-range-thumb{ width:24px; height:24px; background:#7C9D96; cursor:pointer; border-radius:50%;}
    .chart-container{ position:relative; width:100%; max-width:800px; margin:auto; height:400px;}
  </style>
</head>
<body class="antialiased">

  <!-- å°è¦½åˆ— -->
  <header class="bg-white/90 backdrop-blur sticky top-0 z-50 shadow">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="./" class="text-lg md:text-xl font-bold text-emerald-700">å¤ªé™½èƒ½äº’å‹•å°ˆé¡Œ</a>
      <nav class="hidden md:flex gap-6 text-sm">
        <a class="hover:text-emerald-700" href="roi-dashboard.html">æŠ•è³‡æ•ˆç›Šå„€è¡¨æ¿</a>
        <a class="hover:text-emerald-700" href="roof-100.html">100 åªäº’å‹•åˆ†æ</a>
        <a class="hover:text-emerald-700" href="pro-guide.html">åˆè¦ / å®‰å…¨ / æµç¨‹</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-10 md:py-14">
    <section class="text-center mb-12">
      <h1 class="text-3xl md:text-4xl font-bold accent-text">æ‚¨çš„100åªå±‹é ‚ï¼Œä¸€åº§æ½›åŠ›ç„¡çª®çš„ç¶ è‰²é‡‘ç¤¦</h1>
      <p class="max-w-3xl mx-auto text-lg text-gray-600">
        é€™ä»½å·¥å…·è®“æ‚¨æ¨¡æ“¬ä¸åŒæ–¹æ¡ˆä¸‹çš„å¤ªé™½èƒ½æŠ•è³‡ï¼Œæ¢ç´¢è²¡å‹™æ½›åŠ›èˆ‡ç”³è«‹æµç¨‹ã€‚
      </p>
    </section>

    <!-- æŠ•è³‡æ¨¡æ“¬å™¨ -->
    <section class="card p-6 md:p-8 mb-12">
      <h2 class="text-2xl font-bold mb-6 text-center">ğŸ“ˆ æŠ•è³‡æ•ˆç›Šå³æ™‚æ¨¡æ“¬å™¨</h2>
      <div class="grid md:grid-cols-2 gap-8">
        <div>
          <label for="capacity" class="block font-bold mb-2">è£ç½®å®¹é‡ (kW): <span id="capacityValue" class="accent-text">60</span></label>
          <input type="range" id="capacity" min="40" max="66.7" step="0.1" value="60" class="mb-6">

          <label for="cost" class="block font-bold mb-2">æ¯ç“©å»ºç½®æˆæœ¬ (NT$): <span id="costValue" class="accent-text">55,000</span></label>
          <input type="range" id="cost" min="50000" max="60000" step="100" value="55000" class="mb-6">

          <label for="sunlight" class="block font-bold mb-2">æ—¥ç…§æ¢ä»¶:</label>
          <select id="sunlight" class="w-full p-2 border rounded-md bg-gray-50">
            <option value="3.68">å—éƒ¨ (3.68 å°æ™‚/æ—¥)</option>
            <option value="3.5">ä¸­éƒ¨ (3.5 å°æ™‚/æ—¥)</option>
            <option value="3.2">åŒ—éƒ¨ (3.2 å°æ™‚/æ—¥)</option>
          </select>
        </div>

        <div class="card p-4 bg-gray-50">
          <h3 class="text-xl font-bold text-center secondary-accent-text mb-4">è²¡å‹™é ä¼°ç¸½è¦½</h3>
          <div class="space-y-2">
            <div class="flex justify-between"><span>ç¸½å»ºç½®æˆæœ¬:</span><span id="totalCost" class="stat-value"></span></div>
            <div class="flex justify-between"><span>æ”¿åºœçå‹µé‡‘:</span><span id="subsidy" class="stat-value"></span></div>
            <div class="flex justify-between font-bold border-t pt-2"><span>å¯¦éš›æŠ•å…¥:</span><span id="netCost" class="stat-value"></span></div>
            <hr>
            <div class="flex justify-between"><span>å¹´ç™¼é›»é‡:</span><span id="annualGeneration" class="stat-value"></span></div>
            <div class="flex justify-between"><span>å¹´æ”¶ç›Š:</span><span id="annualRevenue" class="stat-value"></span></div>
            <div class="flex justify-between font-bold border-t pt-2"><span>å›æ”¶æœŸ:</span><span id="paybackPeriod" class="stat-value"></span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ”¶ç›Šåœ–è¡¨ -->
    <section class="card p-6">
      <h2 class="text-2xl font-bold text-center mb-6">ğŸ’° 20å¹´é•·æœŸæ”¶ç›Š</h2>
      <div class="chart-container">
        <canvas id="revenueChart"></canvas>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-white text-center text-sm py-6 mt-12">
    Â© 2025 100åªäº’å‹•åˆ†æ. æ•¸æ“šåƒ…ä¾›æ¨¡æ“¬åƒè€ƒã€‚
  </footer>

  <script>
    const capacitySlider=document.getElementById('capacity');
    const capacityValue=document.getElementById('capacityValue');
    const costSlider=document.getElementById('cost');
    const costValue=document.getElementById('costValue');
    const sunlightSelect=document.getElementById('sunlight');
    const totalCostEl=document.getElementById('totalCost');
    const subsidyEl=document.getElementById('subsidy');
    const netCostEl=document.getElementById('netCost');
    const annualGenerationEl=document.getElementById('annualGeneration');
    const annualRevenueEl=document.getElementById('annualRevenue');
    const paybackPeriodEl=document.getElementById('paybackPeriod');
    const FIT_RATE=4.2320, SUBSIDY_PER_KW=3000;
    let revenueChart;

    function formatNumber(num){return new Intl.NumberFormat('zh-TW').format(Math.round(num));}
    function calculate(){
      const capacity=parseFloat(capacitySlider.value);
      const costPerKw=parseInt(costSlider.value,10);
      const dailySunlight=parseFloat(sunlightSelect.value);
      capacityValue.textContent=capacity.toFixed(1);
      costValue.textContent=formatNumber(costPerKw);
      const totalCost=capacity*costPerKw;
      const subsidy=Math.min(capacity*SUBSIDY_PER_KW,300000);
      const netCost=totalCost-subsidy;
      const annualGeneration=capacity*dailySunlight*365;
      const annualRevenue=annualGeneration*FIT_RATE;
      const paybackPeriod=(netCost/annualRevenue).toFixed(1);
      totalCostEl.textContent=`NT$ ${formatNumber(totalCost)}`;
      subsidyEl.textContent=`NT$ ${formatNumber(subsidy)}`;
      netCostEl.textContent=`NT$ ${formatNumber(netCost)}`;
      annualGenerationEl.textContent=`${formatNumber(annualGeneration)} åº¦`;
      annualRevenueEl.textContent=`NT$ ${formatNumber(annualRevenue)}`;
      paybackPeriodEl.textContent=`${paybackPeriod} å¹´`;
      updateChart(netCost,annualRevenue);
    }
    function updateChart(netCost,annualRevenue){
      const years=Array.from({length:21},(_,i)=>`ç¬¬${i}å¹´`);
      const cumulativeRevenue=years.map((_,i)=>annualRevenue*i);
      revenueChart.data.labels=years;
      revenueChart.data.datasets[0].data=cumulativeRevenue;
      revenueChart.data.datasets[1].data=Array(21).fill(netCost);
      revenueChart.update();
    }
    function initializeChart(){
      const ctx=document.getElementById('revenueChart').getContext('2d');
      revenueChart=new Chart(ctx,{
        type:'line',
        data:{labels:[],datasets:[{label:'ç´¯ç©æ”¶ç›Š',data:[],borderColor:'#7C9D96',backgroundColor:'rgba(124,157,150,0.1)',fill:true,tension:0.1},{label:'æŠ•å…¥æˆæœ¬',data:[],borderColor:'#A1887F',borderDash:[5,5],fill:false,pointRadius:0}]},
        options:{responsive:true,maintainAspectRatio:false}
      });
    }
    capacitySlider.addEventListener('input',calculate);
    costSlider.addEventListener('input',calculate);
    sunlightSelect.addEventListener('change',calculate);
    document.addEventListener('DOMContentLoaded',()=>{initializeChart();calculate();});
  </script>
</body>
</html>
